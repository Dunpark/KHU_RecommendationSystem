# Phase 2 – Task 2.1: 파티션 교차 분석

**작성일**: 2024.12.05  
**상태**: ✅ 완료

---

## 1. Task 목표

아이템 파티션(Popular/Long-tail) × 사용자 파티션(Heavy/Light)의 **4개 그룹 교차 분석**

---

## 2. 실행 환경

- **실행 스크립트**: `task2_1_partition_cross_analysis.py`
- **처리 방식**: 청크 기반 (2M rows/chunk)
- **총 처리**: 41,154,794 rows

---

## 3. 핵심 결과

### 3.1 파티션 정보 확인

| 파티션 | 분류 | 개수 |
|--------|------|------|
| 아이템 | Popular | 462 |
| 아이템 | Long-tail | 50,410 |
| 사용자 | Heavy | 2,593,061 |
| 사용자 | Light | 11,713,003 |

### 3.2 4개 그룹별 상호작용 분포 ⭐

| 그룹 | 상호작용 수 | 비율 |
|------|-----------|------|
| **Popular × Heavy** | **13,482,081** | **32.76%** |
| **Popular × Light** | **11,195,589** | **27.20%** |
| **Long-tail × Heavy** | **11,691,151** | **28.41%** |
| **Long-tail × Light** | **4,785,973** | **11.63%** |
| **합계** | **41,154,794** | **100.00%** |

### 3.3 교차 분석 매트릭스

#### 상호작용 수
```
                    Heavy           Light           합계
  ──────────────────────────────────────────────────────
  Popular       13,482,081      11,195,589      24,677,670
  Long-tail     11,691,151       4,785,973      16,477,124
  ──────────────────────────────────────────────────────
  합계          25,173,232      15,981,562      41,154,794
```

#### 상호작용 비율 (%)
```
                    Heavy           Light           합계
  ──────────────────────────────────────────────────────
  Popular           32.76%          27.20%          59.96%
  Long-tail         28.41%          11.63%          40.04%
  ──────────────────────────────────────────────────────
  합계              61.17%          38.83%         100.00%
```

### 3.4 파티션별 합계

#### 아이템 파티션
| 분류 | 상호작용 수 | 비율 |
|------|-----------|------|
| Popular | 24,677,670 | **59.96%** |
| Long-tail | 16,477,124 | **40.04%** |

#### 사용자 파티션
| 분류 | 상호작용 수 | 비율 |
|------|-----------|------|
| Heavy | 25,173,232 | **61.17%** |
| Light | 15,981,562 | **38.83%** |

---

## 4. 그룹별 상세 통계

### 4.1 플레이 시간 (hours)

| 그룹 | 평균 | 중앙값 |
|------|------|--------|
| Popular × Heavy | 104.1 | 34.4 |
| Popular × Light | **147.5** | **54.1** |
| Long-tail × Heavy | 46.8 | 13.6 |
| Long-tail × Light | 70.5 | 19.6 |

```
💡 발견:
- Popular × Light가 가장 높은 플레이 시간
- Heavy 사용자가 오히려 Light보다 평균 플레이 시간이 낮음
- 이유: Heavy 사용자는 많은 게임을 리뷰하므로 게임당 시간이 분산
```

### 4.2 추천 비율 (is_recommended=True)

| 그룹 | 추천 비율 |
|------|----------|
| Popular × Heavy | 86.4% |
| Popular × Light | **87.1%** |
| Long-tail × Heavy | **83.6%** |
| Long-tail × Light | 86.4% |

```
💡 발견:
- 모든 그룹에서 높은 추천 비율 (83~87%)
- Long-tail × Heavy가 가장 낮음 (83.6%)
- Heavy 사용자가 더 비판적인 리뷰 작성 경향
```

---

## 5. 핵심 인사이트 ⭐⭐⭐

### 5.1 그룹 특성 정리

| 그룹 | 비율 | 특성 | 모델 전략 |
|------|------|------|----------|
| **Popular × Heavy** | 32.76% | CF 신호 풍부 | CF 기반 추천 |
| **Popular × Light** | 27.20% | 인기 게임 선호 | Popularity 기반 |
| **Long-tail × Heavy** | 28.41% | 다양한 취향 | Content 기반 |
| **Long-tail × Light** | 11.63% | Cold-start 심각 | Content 필수 |

### 5.2 핵심 발견

#### 1️⃣ Popular × Heavy (협업 신호 풍부)
```
- 상호작용: 13,482,081 (32.76%)
- CF 모델의 핵심 학습 데이터
- 가장 높은 추천 품질 기대
```

#### 2️⃣ Long-tail × Light (Cold-start 심각)
```
- 상호작용: 4,785,973 (11.63%)
- CF만으로는 추천 불가능
- Content 피처 의존 필수
```

#### 3️⃣ 불균형 비율
```
Popular_Heavy / Long-tail_Light = 2.82x
→ Heavy 사용자가 Popular 아이템에 집중하는 경향
```

### 5.3 연구 질문(RQ) 연결

| RQ | 이 결과의 시사점 |
|----|----------------|
| **RQ1** | Long-tail (40%) 중 28.41%는 Heavy가 담당 → Content로 Light 보완 |
| **RQ2** | Light 사용자 상호작용 38.83% → 전체의 1/3 이상 |
| **RQ3** | 4개 그룹별 Hybrid 가중치 차등 적용 근거 확보 |

---

## 6. 모델링 시사점

### 6.1 그룹별 추천 전략

| 그룹 | 추천 전략 | CF 가중치 | Content 가중치 |
|------|----------|----------|---------------|
| Popular × Heavy | CF 중심 | **높음** | 낮음 |
| Popular × Light | Popularity + CF | 중간 | 중간 |
| Long-tail × Heavy | CF + Content | 중간 | **높음** |
| Long-tail × Light | Content 중심 | **낮음** | **높음** |

### 6.2 평가 전략

```
1. 전체 성능: Recall@K, NDCG@K (전체 Test set)

2. 그룹별 성능 분리 평가:
   - Recall@K (Popular×Heavy)
   - Recall@K (Popular×Light)
   - Recall@K (Long-tail×Heavy)
   - Recall@K (Long-tail×Light)

3. Coverage 지표:
   - Long-tail 커버리지: 추천된 Long-tail 비율
   
4. Novelty 지표:
   - 인기 편향 측정
```

---

## 7. 생성 파일

| 파일 | 경로 | 설명 |
|------|------|------|
| 분석 스크립트 | `task2_1_partition_cross_analysis.py` | 교차 분석 코드 |

---

## 8. 체크리스트

- [x] 파티션 정보 로드 (merged_items, merged_users)
- [x] 41M rows 청크 처리
- [x] 4개 그룹별 상호작용 집계
- [x] 교차 분석 매트릭스 생성
- [x] 그룹별 플레이 시간 통계
- [x] 그룹별 추천 비율 통계
- [x] 핵심 인사이트 도출
- [x] RQ와 연결한 해석
- [x] 모델링 시사점 정리

